<html>
    <head>
        <title>Sign Up | Houston Answers</title>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">

        <link rel="stylesheet" href="http://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
        <script src="https://cdn.jsdelivr.net/npm/vue@2.5.13/dist/vue.js"></script>
        <script src="http://maxcdn.bootstrapcdn.com/bootstrap/3.3.4/js/bootstrap.min.js"></script>
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
        <link rel="stylesheet" type="text/css" href="login-style.css">

    </head>


    <body>

        <div id="wrapper">

            <div id="logo">
              <a href="welcome.html">
              <img src="../../resources/icons/login-logo.png" width="400px" alt="Houston Answers"></a>
            </div>

            <form id="new_user" method="post" action="">
              <div class="form-element">
                  <label for="firstname">First Name</label>
                  <input type="text" name="firstname" id="firstname" placeholder="First Name">
                  <span class="error">*First name is required</span>
              </div>

              <div class="form-element">
                  <label for="lastname">Last Name</label>
                  <input type="text" name="lastname" id="lastname" placeholder="Last Name">
                  <span class="error">*Last name is required</span>
              </div>

              <div class="form-element">
                  <label for="email">Email</label>
                  <input type="text" name="email" id="email" placeholder="email@example.com">
                  <span class="error">*A valid email adress is required</span>
              </div>

              <div class="form-element">
                  <label for="username">Username</label>
                  <input type="text" name="username" id="username" placeholder="Username">
                  <span class="error">*Username is required</span>
              </div>

              <div class="form-element">
                  <label for="password">Password</label>
                  <input type="password" name="password" id="password">
                  <span class="error">*Password is required</span>
              </div>

              <div class="form-element">
                  <label for="passwordConfirm">Confirm Password</label>
                  <input type="password" name="passwordConfirm" id="passwordConfirm">
                  <span class="error">*Password don't match</span>
              </div>

              <div class="form-element">
                  <input type="submit" id="submitButton" value="Sign Up">
              </div>
          </form>

            <div id="successMessage" class="alert alert-success">Signed up successfully!</div>
            <div id="errorMessage"></div>

        </div>

        <script type="text/javascript">


            function isEmailFunc(email) {
              var regex = /^([a-zA-Z0-9_.+-])+\@(([a-zA-Z0-9-])+\.)+([a-zA-Z0-9]{2,4})+$/;
              return regex.test(email);
            }

            function changeClass(input, field){
              if(field){
                input.removeClass("invalid").addClass("valid");
              }else{
                input.removeClass("valid").addClass("invalid");
              }
            }
            $(document).ready(function(){
              $('#firstname').on('input', function(){
                var input = $(this);
                var isFirstname = input.val();
                changeClass(input,isFirstname);
              });

              $('#lastname').on('input', function(){
                var input = $(this);
                var isLastname = input.val();
                changeClass(input,isLastname);
              });

              $('#email').on('input', function(){
                var input = $(this);
                var isEmail = isEmailFunc(input.val());
                changeClass(input,isEmail);
              });

              $('#username').on('input', function(){
                var input = $(this);
                var isUsername = input.val();
                changeClass(input,isUsername);
              });

              $('#password').on('input', function(){
                var input = $(this);
                var isPassword = input.val();
                changeClass(input,isPassword);
              });


              $('#passwordConfirm').on('input', function(){
                var input = $(this);
                var isPasswordConfirm= input.val();
                if(isPasswordConfirm == $("#password").val()){
                  input.removeClass("invalid").addClass("valid");
                }else{
                  input.removeClass("valid").addClass("invalid");
              }
              });

              $('#submitButton').click(function(event){
                var form_data = $("#new_user").serializeArray();
                var error_free = true;
                for(var input in form_data){
                  var element =$('#'+form_data[input]['name']);
                  var valid = element.hasClass("valid");
                  var error_element =$("span",element.parent());
                  if(!valid){
                    error_element.removeClass("error").addClass("error_show");
                    error_free = false;
                  }else{
                    error_element.removeClass("error_show").addClass("error");
                  }
                  if(!error_free){
                    event.preventDefault();
                    //alert("Double check information provided")
                  }else{
                    //alert("No errors, Form will be submitted");
                  }
                }
              });


            });

        </script>

    </body>
</html>
